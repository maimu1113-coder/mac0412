<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Mac Talk PRO</title>
<script src="/socket.io/socket.io.js"></script>

<style>
:root{
  --bg:#0b0e14;
  --side:#161920;
  --card:#1f232d;
  --accent:#00f2ea;
  --pink:#ff0050;
}

body{
  margin:0;
  height:100vh;
  display:flex;
  background:var(--bg);
  color:#fff;
  font-family:sans-serif;
  overflow:hidden;
}

/* ===== ã‚µã‚¤ãƒ‰ãƒãƒ¼ ===== */
.sidebar{
  width:60px;
  background:var(--side);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:30px;
  gap:35px;
}

.side-btn{
  font-size:1.5rem;
  opacity:.6;
  cursor:pointer;
}

/* ===== ãƒ¡ã‚¤ãƒ³ ===== */
.main{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:12px;
  gap:10px;
  overflow:hidden;
}

/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.header h2{
  margin:0;
}

.live-info{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:0.8rem;
}

.badge{
  background:red;
  padding:2px 6px;
  border-radius:6px;
  font-size:0.7rem;
}

/* ===== é…ä¿¡è€…æƒ…å ± ===== */
#streamer{
  display:none;
  align-items:center;
  gap:10px;
  background:var(--card);
  padding:10px;
  border-radius:12px;
}

#streamer img{
  width:48px;
  height:48px;
  border-radius:50%;
  object-fit:cover;
  background:#000;
}

.stats{
  display:flex;
  gap:12px;
  font-size:0.75rem;
  opacity:.9;
}

/* ===== å…¥åŠ›ã‚«ãƒ¼ãƒ‰ ===== */
.card{
  background:var(--card);
  border-radius:12px;
  padding:14px;
}

input{
  width:100%;
  box-sizing:border-box;
  padding:14px;
  font-size:16px;
  border-radius:8px;
  background:#000;
  border:1px solid #555;
  color:#fff;
  margin-bottom:10px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  margin-bottom:8px;
  cursor:pointer;
}

.btn-pink{ background:var(--pink); color:#fff; }
.btn-blue{ background:var(--accent); color:#000; }

/* ===== ãƒ­ã‚° ===== */
#log-area{
  flex:1;
  overflow-y:auto;
  background:rgba(255,255,255,0.03);
  border-radius:12px;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.log-item{
  background:var(--card);
  padding:10px;
  border-radius:8px;
  border-left:4px solid var(--accent);
  font-size:0.85rem;
}
</style>
</head>

<body>

<div class="sidebar">
  <div class="side-btn">ğŸ </div>
  <div class="side-btn">ğŸ¤</div>
  <div class="side-btn">âš™ï¸</div>
</div>

<div class="main">

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <div class="header">
    <h2>Mac Talk <span style="color:var(--accent)">PRO</span></h2>
    <div class="live-info">
      <span class="badge">LIVE</span>
      ğŸ‘¥ <span id="followers">0</span>
      â¤ï¸ <span id="likes">0</span>
    </div>
  </div>

  <!-- é…ä¿¡è€… -->
  <div id="streamer">
    <img id="avatar">
    <div>
      <div><strong id="name"></strong></div>
      <div class="stats">
        <div>ğŸ‘¥ <span id="followers2">0</span></div>
        <div>â¤ï¸ <span id="likes2">0</span></div>
      </div>
    </div>
  </div>

  <!-- å…¥åŠ› -->
  <div class="card">
    <input id="tid" placeholder="TikTok IDï¼ˆ@ãªã—ï¼‰">
    <button class="btn-pink" onclick="voiceOn=true">1. èª­ã¿ä¸Šã’ON</button>
    <button class="btn-blue" onclick="connect()">2. æ¥ç¶š</button>
  </div>

  <!-- ãƒ­ã‚° -->
  <div id="log-area">
    <div class="log-item">ãƒ­ã‚°å¾…æ©Ÿä¸­â€¦</div>
  </div>

</div>

<script>
const socket = io();
let voiceOn=false;

function log(m){
  const d=document.createElement("div");
  d.className="log-item";
  d.innerText=m;
  document.getElementById("log-area").prepend(d);
}

function connect(){
  const id=document.getElementById("tid").value.trim();
  if(!id) return alert("IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
  socket.emit("setTarget", id.replace("@",""));
  log("â³ æ¥ç¶šä¸­â€¦");
}

socket.on("streamer", d=>{
  document.getElementById("streamer").style.display="flex";
  avatar.src=d.avatar;
  name.innerText=d.nickname+" (@"+d.uniqueId+")";
  followers.innerText=d.followers;
  followers2.innerText=d.followers;
  likes.innerText=d.likes;
  likes2.innerText=d.likes;
  log("âœ… TikTokæ¥ç¶šæˆåŠŸï¼");
});

socket.on("up-follow", n=>{
  followers.innerText=n;
  followers2.innerText=n;
});

socket.on("up-like", n=>{
  likes.innerText=n;
  likes2.innerText=n;
});

socket.on("ev", e=>{
  if(e.t==="chat") log("ğŸ’¬ "+e.u+"ï¼š"+e.m);
});
</script>

</body>
</html>
