<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<style>
    body { margin: 0; background: transparent; overflow: hidden; font-family: 'Hiragino Kaku Gothic Pro', sans-serif; }
    #box {
        position: absolute; bottom: 30px; left: 30px;
        color: white; font-size: 40px; font-weight: bold;
        background: rgba(0,0,0,0.6); padding: 15px 30px;
        border-radius: 15px; opacity: 0; transform: translateX(-50px);
        transition: 0.5s; text-shadow: 2px 2px 4px #000;
        border-left: 10px solid #00f2ea;
    }
    .show { opacity: 1 !important; transform: translateX(0) !important; }
</style>
</head>
<body>
<div id="box"></div>
<script>
    const socket=io();
    const box=document.getElementById("box");
    let timer;

    socket.on("ev", e => {
        let m = "";
        if(e.t==="chat") m = `${e.u}: ${e.m}`;
        if(e.t==="follow") { 
            m = `ðŸ‘¤ ${e.u} Follow!`;
            confetti({particleCount:40, spread:60, origin:{y:0.8}});
        }
        if(e.t==="gift") { 
            m = `ðŸŽ ${e.u} [${e.g} x${e.c}]`;
            confetti({particleCount:100, spread:100, origin:{y:0.7}, colors:['#ff0050','#00f2ea']});
        }
        
        if(m){
            box.innerText = m;
            box.classList.add("show");
            clearTimeout(timer);
            timer = setTimeout(() => box.classList.remove("show"), 6000);
        }
    });
</script>
</body>
</html>
