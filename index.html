<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mobile TikFinity</title>

<style>
:root{
  --bg:#000;
  --card:#111;
  --main:#ff0050;
  --text:#fff;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont;
}
header{
  padding:18px;
  text-align:center;
  border-bottom:1px solid #222;
}
h1{margin:0;font-size:20px}
.container{padding:15px}
input{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border-radius:12px;
  border:1px solid #333;
  background:#111;
  color:#fff;
  font-size:15px;
  text-align:center;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:30px;
  background:var(--main);
  color:#fff;
  font-size:15px;
  font-weight:bold;
}
button.off{background:#333}
.log{
  margin-top:12px;
  background:#080808;
  border-radius:14px;
  padding:10px;
  height:55vh;
  overflow-y:auto;
  font-size:12px;
  font-family:monospace;
}
.log div{margin-bottom:6px}
</style>
</head>

<body>

<header>
  <h1>ğŸ“± Mobile TikFinity</h1>
</header>

<div class="container">
  <input id="userId" placeholder="TikTok IDï¼ˆè¡¨ç¤ºç”¨ï¼‰">
  <button id="toggleBtn" onclick="toggle()">â–¶ èª­ã¿ä¸Šã’ ON</button>

  <div class="log" id="log">
    <div>System Ready...</div>
  </div>
</div>

<script>
let active = false;
let ws = null;

/* â–¶ ON / OFF */
function toggle(){
  active = !active;
  const btn = document.getElementById("toggleBtn");
  btn.innerText = active ? "â–  èª­ã¿ä¸Šã’ OFF" : "â–¶ èª­ã¿ä¸Šã’ ON";
  btn.className = active ? "off" : "";
  addLog(active ? "ğŸ”Š èª­ã¿ä¸Šã’é–‹å§‹" : "ğŸ”‡ èª­ã¿ä¸Šã’åœæ­¢");

  if(active && !ws){
    connect();
  }
}

/* ğŸŒ ã‚¯ãƒ©ã‚¦ãƒ‰ã«æ¥ç¶š */
function connect(){
  // â˜…ã“ã“ã‚’ã‚ãªãŸã®ã‚µãƒ¼ãƒãƒ¼URLã«å¤‰æ›´
  ws = new WebSocket("wss://YOUR-SERVER-URL");

  ws.onopen = () => addLog("ğŸŒ ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šæˆåŠŸ");

  ws.onmessage = (e)=>{
    if(!active) return;
    const data = JSON.parse(e.data);

    if(data.type === "comment"){
      addLog("ğŸ’¬ " + data.user + ": " + data.text);
      speak(data.user + "ã€" + data.text);
    }

    if(data.type === "gift"){
      addLog("ğŸ " + data.user + " " + data.gift);
      speak(data.user + "ã€" + data.gift + "ã‚ã‚ŠãŒã¨ã†");
    }
  };

  ws.onclose = ()=>{
    addLog("âŒ æ¥ç¶šãŒåˆ‡ã‚Œã¾ã—ãŸ");
    ws = null;
  };
}

/* ğŸ“ ãƒ­ã‚°è¡¨ç¤º */
function addLog(text){
  const log = document.getElementById("log");
  const div = document.createElement("div");
  div.textContent = "["+new Date().toLocaleTimeString()+"] "+text;
  log.prepend(div);
}

/* ğŸ”Š èª­ã¿ä¸Šã’ */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "ja-JP";
  speechSynthesis.speak(u);
}
</script>

</body>
</html>
