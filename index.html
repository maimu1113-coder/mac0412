<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Mac Talk PRO</title>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>

<body style="background:#000;color:#fff;text-align:center;">
<h1>Mac Talk PRO</h1>

<input id="targetId" value="macrecords1" style="padding:10px;width:80%">
<div id="start" style="margin:20px;background:#ff0050;padding:30px;border-radius:50%">START</div>

<script>
const socket = io();
const start = document.getElementById("start");

function speak(t){
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(t);
  u.lang = "ja-JP";
  speechSynthesis.speak(u);
}

start.onclick = ()=>{
  speak("起動します");
  socket.emit("start", document.getElementById("targetId").value);
};

socket.on("ai", d => speak(d.text));
</script>
</body>
</html>
